<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
  <title>Kunduz Kelime Keşfi</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" crossorigin="anonymous">
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
  <!-- Firebase SDK'ları -->
  <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-auth-compat.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background-color: #edf2f7;
      font-family: "Roboto", sans-serif;
      padding: 20px;
      overflow-y: auto;
      overflow-x: hidden;
    }

    #oyun-alani {
      padding: 25px 20px;
      width: 100%;
      max-width: 450px;
      background-color: #ffffff;
      border: 3px solid #00A396;
      border-radius: 15px;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
      margin: 0 auto;
    }

    .oyun-header {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 25px;
      gap: 15px;
      position: relative;
    }

    .oyun-header::after {
      content: '';
      position: absolute;
      bottom: -15px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 3px;
      background: #00A396;
      border-radius: 2px;
    }

    .oyun-header img {
      width: 45px;
      height: 45px;
      border-radius: 12px;
      object-fit: cover;
      box-shadow: 0 4px 12px rgba(0, 163, 150, 0.2);
      border: 2px solid #00A396;
      padding: 2px;
      background: white;
    }

    .oyun-header h1 {
      margin: 0;
      font-size: 1.5em;
      font-weight: 700;
      color: #00A396;
      text-shadow: 0 2px 4px rgba(0, 163, 150, 0.1);
    }

    .aciklama {
      padding: 15px;
      margin-bottom: 20px;
      background-color: #F9FAFA;
      border-left: 5px solid #01CCBC;
      border-radius: 8px;
      font-size: 1rem;
      color: #2d3748;
      line-height: 1.5;
    }

    .mesaj-kutusu {
      display: none;
      padding: 10px;
      margin-top: 15px;
      border-radius: 8px;
      text-align: center;
      font-size: 1rem;
    }

    .mesaj-basarili {
      background-color: #01CCBC;
      color: white;
    }

    .mesaj-hata {
      background-color: #f56565;
      color: white;
    }

    .vurgula {
      font-weight: bold;
    }

    .yesil-vurgula {
      color: #01CCBC;
    }

    .sari-vurgula {
      color: #FABE00;
    }

    .gri-vurgula {
      color: #828585;
    }

    ul {
      padding-left: 20px;
    }

    #oyun-tablosu {
      display: flex;
      flex-direction: column;
      gap: 9px;
    }

    .satir {
      display: flex;
      justify-content: center;
      gap: 8px;
    }

    .harf-kutusu {
      width: 50px;
      height: 50px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 18px;
      font-weight: bold;
      border: 1px solid #a0aec0;
      border-radius: 8px;
      background-color: #e2e8f0;
      text-transform: uppercase;
      transition: all 0.3s ease;
    }

    .yesil {
      background-color: #01CCBC;
      color: white;
    }

    .sari {
      background-color: #FABE00;
      color: white;
    }

    .gri {
      background-color: #828585;
      color: white;
    }

    #giris-alani {
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    input[type="text"] {
      padding: 12px;
      font-size: 16px;
      border: 1px solid #cbd5e0;
      border-radius: 8px;
      margin-bottom: 10px;
      width: 100%;
    }

    button {
      padding: 12px 15px;
      font-size: 16px;
      font-weight: bold;
      color: white;
      background-color: #00A396;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0, 163, 150, 0.4);
      transition: all 0.3s ease;
    }

    button:hover {
      background-color: #019183;
      box-shadow: 0 6px 12px rgba(1, 145, 131, 0.5);
    }

    #istatistik-alani {
      width: 100%;
      max-width: 450px;
      margin: 20px auto;
      background: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
    }

    #yeniden-baslat-tusu {
      display: none;
      margin-top: 15px;
      padding: 12px 20px;
      background-color: #f56565;
      color: white;
      font-size: 18px;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(245, 101, 101, 0.4);
    }

    #yeniden-baslat-tusu:hover {
      background-color: #e53e3e;
    }

    .save-stats-btn {
      width: 100%;
      max-width: 450px;
      margin: 20px auto;
      padding: 12px 24px;
      background: #00A396;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(0, 163, 150, 0.2);
    }

    .save-stats-btn:hover {
      background: white;
      color: #00A396;
      border: 2px solid #00A396;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 163, 150, 0.15);
    }

    .btn-container {
      width: 100%;
      max-width: 450px;
      margin: 20px auto;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
    }

    .btn {
      min-width: 120px;
      background-color: #fff;
      padding: 1rem 1.5rem;
      text-decoration: none;
      color: white;
      display: flex;
      align-items: center;
      border-radius: 10px;
      box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.1);
      justify-content: center;
    }

    .istatistik-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-top: 15px;
    }

    .istatistik-kutu {
      background-color: #f7fafc;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      border: 1px solid #e2e8f0;
    }

    .istatistik-sayi {
      display: block;
      font-size: 24px;
      font-weight: bold;
      color: #00A396;
      margin-bottom: 5px;
    }

    .istatistik-baslik {
      font-size: 14px;
      color: #4a5568;
    }

    .grafik-container {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 20px;
      margin: 20px 0;
    }

    .grafik-kart {
      min-height: 300px;
      background: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .grafik-kart h3 {
      margin-bottom: 15px;
      color: #2d3748;
      font-size: 16px;
    }

    .tablo-container {
      margin-top: 30px;
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .tablo-container h3 {
      margin-bottom: 20px;
      color: #2d3748;
      font-size: 18px;
      font-weight: 600;
    }

    .tablo-scroll {
      overflow-x: auto;
      border-radius: 10px;
      background: #f8fafc;
    }

    .istatistik-tablo {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      margin: 0;
    }

    .istatistik-tablo th {
      background: #00A396;
      color: white;
      font-weight: 500;
      padding: 15px;
      text-align: left;
      font-size: 14px;
      white-space: nowrap;
    }

    .istatistik-tablo th:first-child {
      border-top-left-radius: 10px;
    }

    .istatistik-tablo th:last-child {
      border-top-right-radius: 10px;
    }

    .istatistik-tablo td {
      padding: 12px 15px;
      border-bottom: 1px solid #e2e8f0;
      font-size: 14px;
      color: #4a5568;
    }

    .istatistik-tablo tr:last-child td {
      border-bottom: none;
    }

    .istatistik-tablo tr:hover td {
      background-color: #f1f5f9;
    }

    .basari-oran {
      font-weight: 600;
      color: #00A396;
    }

    .tarih-hucre {
      color: #718096;
      font-weight: 500;
    }

    @media (max-width: 768px) {
      .istatistik-ozet,
      .grafik-container {
        grid-template-columns: 1fr;
      }
    }

    #adminContent {
      display: flex;
      flex-direction: column;
      gap: 30px;
    }

    .kelime-ve-istatistik {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 30px;
      height: 100%;
    }

    .kelime-bolumu {
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      height: 100%;
      overflow-y: auto;
    }

    .kelime-grid {
      display: grid;
      gap: 12px;
    }
    
    .kelime-gun {
      background: white;
      padding: 12px 15px;
      border-radius: 10px;
      border: 1px solid #e2e8f0;
      transition: all 0.3s ease;
    }
    
    .kelime-gun:hover {
      border-color: #00A396;
      box-shadow: 0 2px 8px rgba(0, 163, 150, 0.1);
    }
    
    .kelime-kaydet {
      margin-top: 20px;
      width: 100%;
      padding: 12px;
      background: #00A396;
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .kelime-kaydet:hover {
      background: #019183;
      transform: translateY(-2px);
    }

    .admin-login button {
      width: 100%;
      padding: 12px;
      background: #00A396;
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 16px;
      margin-top: 10px;
      box-shadow: 0 4px 6px rgba(0, 163, 150, 0.2);
    }

    .admin-login button:hover {
      background: white;
      color: #00A396;
      border: 2px solid #00A396;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 163, 150, 0.15);
    }

    .admin-input-group input {
      width: 100%;
      padding: 12px 12px 12px 40px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.3s ease;
      background: #f8fafc;
    }

    .admin-input-group input:focus {
      outline: none;
      border-color: #00A396;
      background: white;
      box-shadow: 0 2px 4px rgba(0, 163, 150, 0.1);
    }

    .admin-input-group i {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #64748b;
      transition: color 0.3s ease;
    }

    .admin-input-group input:focus + i {
      color: #00A396;
    }

    .btn-kunduz {
      background-color: #00A396;
      color: white;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 24px;
      border-radius: 50px;
      font-weight: 600;
      text-decoration: none;
      border: 2px solid transparent;
      box-shadow: 0 4px 6px rgba(0, 163, 150, 0.2);
    }

    .btn-kunduz:hover {
      background-color: white;
      color: #00A396;
      border: 2px solid #00A396;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 163, 150, 0.15);
    }

    .btn-kunduz i {
      font-size: 16px;
      transition: transform 0.3s ease;
    }

    .btn-kunduz:hover i {
      transform: translateX(-4px);
    }

    .istatistik-ayirici {
      width: 100%;
      height: 2px;
      background: #e2e8f0;
      margin: 25px 0;
      border-radius: 2px;
    }

    .admin-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .admin-panel {
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      width: 400px;
      height: 90vh;
      overflow-y: auto;
      z-index: 1001;
      position: relative;
    }

    .admin-panel.expanded {
      width: 95%;
      max-width: 1400px;
      height: 95vh;
      background: #f8fafc;
      display: flex;
      flex-direction: column;
      padding: 25px;
      overflow-y: auto;
    }

    #adminLogin {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      padding: 0;
      position: relative;
    }

    #adminContent {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    #adminLogin h2 {
      color: #00A396;
      font-size: 1.8em;
      margin-bottom: 25px;
      font-weight: 600;
    }

    .admin-login {
      display: flex;
      flex-direction: column;
      gap: 20px;
      width: 100%;
      padding: 10px;
    }

    .admin-input-group {
      position: relative;
      width: 100%;
    }

    .admin-input-group input {
      width: 100%;
      padding: 12px 12px 12px 40px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-size: 14px;
      height: 45px;
      background: #f8fafc;
      transition: all 0.3s ease;
    }

    .admin-input-group input:focus {
      outline: none;
      border-color: #00A396;
      background: white;
      box-shadow: 0 2px 4px rgba(0, 163, 150, 0.1);
    }

    .admin-input-group i {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #64748b;
      font-size: 16px;
      transition: color 0.3s ease;
    }

    .admin-input-group input:focus + i {
      color: #00A396;
    }

    .admin-login button {
      width: 100%;
      height: 45px;
      background: #00A396;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      margin-top: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(0, 163, 150, 0.2);
    }

    .admin-login button:hover {
      background: white;
      color: #00A396;
      border: 2px solid #00A396;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 163, 150, 0.15);
    }

    .kelime-ve-istatistik {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 30px;
      height: 100%;
    }

    .istatistik-bolumu {
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      height: 100%;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }

    .grafik-container {
      flex: 1;
      overflow-y: auto;
      padding-right: 10px;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-top: 20px;
    }

    .grafik-bolum {
      height: 300px;
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .analiz-karti {
      grid-column: span 2;
    }

    @media (max-width: 1200px) {
      .grafik-container {
        grid-template-columns: 1fr;
      }
      
      .analiz-karti {
        grid-column: span 1;
      }
    }

    @media (max-width: 768px) {
      .kelime-ve-istatistik {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .kelime-bolumu,
      .istatistik-bolumu {
        height: auto;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 10px;
      }

      #oyun-alani {
        padding: 15px;
        margin: 0;
        border-width: 2px;
      }

      .oyun-header {
        margin-bottom: 15px;
      }

      .oyun-header img {
        width: 35px;
        height: 35px;
      }

      .oyun-header h1 {
        font-size: 1.2em;
      }

      .aciklama {
        font-size: 0.9rem;
        padding: 12px;
        margin-bottom: 15px;
      }

      .harf-kutusu {
        width: 40px;
        height: 40px;
        font-size: 16px;
      }

      .satir {
        gap: 6px;
      }

      #oyun-tablosu {
        gap: 6px;
      }

      input[type="text"] {
        padding: 10px;
        font-size: 14px;
      }

      button {
        padding: 10px;
        font-size: 14px;
      }

      .sonuc-gorsel {
        padding: 20px 15px;
      }

      .sonuc-gorsel .header {
        gap: 10px;
        margin-bottom: 15px;
      }

      .sonuc-gorsel .header img {
        width: 32px;
        height: 32px;
      }

      .sonuc-gorsel .header h2 {
        font-size: 1.2em;
      }

      .skor-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 12px;
        margin-top: 20px;
      }

      .skor-item {
        background: white;
        padding: 15px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 163, 150, 0.1);
        border: 2px solid rgba(0, 163, 150, 0.1);
        transition: all 0.3s ease;
        width: 100%;
        min-height: 80px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        padding: 12px 8px;
      }

      .skor-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(0, 163, 150, 0.15);
        border-color: #00A396;
      }

      .skor-item .baslik {
        font-size: 14px;
        color: #64748b;
        margin-bottom: 8px;
        font-weight: 500;
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .skor-item .deger {
        font-size: 24px;
        font-weight: 700;
        color: #00A396;
        text-align: center;
        line-height: 1;
      }

      @media (max-width: 480px) {
        .skor-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 10px;
        }

        .skor-item {
          padding: 10px;
          min-height: 70px;
        }

        .skor-item .baslik {
          font-size: 12px;
          margin-bottom: 6px;
        }

        .skor-item .deger {
          font-size: 20px;
        }
      }

      .save-stats-btn {
        padding: 10px 20px;
        font-size: 14px;
        margin: 15px auto;
      }
    }

    @media (max-width: 360px) {
      .harf-kutusu {
        width: 35px;
        height: 35px;
        font-size: 14px;
      }

      .satir {
        gap: 4px;
      }

      #oyun-tablosu {
        gap: 4px;
      }

      .sonuc-gorsel .header h2 {
        font-size: 1.1em;
      }

      .skor-item .deger {
        font-size: 18px;
      }
    }

    @media (max-height: 600px) and (orientation: landscape) {
      #oyun-alani {
        max-width: 100%;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        align-items: start;
      }

      .oyun-header {
        grid-column: 1 / -1;
      }

      .aciklama {
        grid-column: 1 / -1;
      }

      .istatistik-ayirici {
        display: none;
      }

      .sonuc-gorsel {
        margin-top: 0;
      }
    }

    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #e2e8f0;
    }

    .admin-header h2 {
      margin: 0;
      color: #00A396;
      font-size: 1.5em;
      font-weight: 600;
    }

    .admin-buttons {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .admin-logout {
      padding: 8px 15px;
      background: #f56565;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 5px;
      transition: all 0.3s ease;
    }

    .admin-logout:hover {
      background: #e53e3e;
      transform: translateY(-2px);
    }

    .admin-close {
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #e2e8f0;
      border-radius: 50%;
      cursor: pointer;
      color: #64748b;
      font-size: 20px;
      transition: all 0.3s ease;
    }

    .admin-close:hover {
      background: #cbd5e0;
      color: #4a5568;
    }

    .login-close {
      position: absolute;
      top: -10px;
      right: -10px;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #e2e8f0;
      border-radius: 50%;
      cursor: pointer;
      color: #64748b;
      font-size: 20px;
      transition: all 0.3s ease;
    }

    .login-close:hover {
      background: #cbd5e0;
      color: #4a5568;
      transform: rotate(90deg);
    }

    .sonuc-gorsel {
      background: white;
      padding: 30px;
      border-radius: 15px;
      color: #2d3748;
      text-align: center;
      width: 100%;
      position: relative;
      overflow: hidden;
      background-image: linear-gradient(135deg, rgba(0, 163, 150, 0.05) 0%, rgba(1, 145, 131, 0.1) 100%);
      max-width: 450px;
      margin: 0 auto;
    }

    .sonuc-gorsel .header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
      justify-content: center;
      text-align: center;
    }

    .sonuc-gorsel .header img {
      width: 45px;
      height: 45px;
      border-radius: 12px;
      object-fit: cover;
      box-shadow: 0 4px 12px rgba(0, 163, 150, 0.2);
      border: 2px solid #00A396;
      padding: 2px;
      background: white;
    }

    .sonuc-gorsel .header h2 {
      margin: 0;
      color: #00A396;
      font-size: 1.4em;
      line-height: 1.2;
      word-break: break-word;
      font-weight: 700;
    }

    @media (max-width: 480px) {
      .sonuc-gorsel .header {
        flex-direction: column;
        gap: 10px;
        text-align: center;
      }
      
      .sonuc-gorsel .header h2 {
        font-size: 1em;
        padding: 0 10px;
      }

      .sonuc-gorsel .header img {
        width: 40px;
        height: 40px;
        margin: 0 auto;
      }
    }

    .skor-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
      margin-top: 20px;
    }

    .skor-item {
      background: white;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 163, 150, 0.1);
      border: 2px solid rgba(0, 163, 150, 0.1);
      transition: all 0.3s ease;
      width: 100%;
      min-height: 80px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      padding: 12px 8px;
    }

    .skor-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0, 163, 150, 0.15);
      border-color: #00A396;
    }

    .skor-item .baslik {
      font-size: 14px;
      color: #64748b;
      margin-bottom: 8px;
      font-weight: 500;
      text-align: center;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .skor-item .deger {
      font-size: 24px;
      font-weight: 700;
      color: #00A396;
      text-align: center;
      line-height: 1;
    }

    @media (max-width: 480px) {
      .skor-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
      }

      .skor-item {
        padding: 10px;
        min-height: 70px;
      }

      .skor-item .baslik {
        font-size: 12px;
        margin-bottom: 6px;
      }

      .skor-item .deger {
        font-size: 20px;
      }
    }

    .admin-icon {
      position: fixed;
      top: 20px;
      right: 20px;
      background: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      border: 2px solid #00A396;
      color: #00A396;
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .admin-icon:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 163, 150, 0.2);
      background: #00A396;
      color: white;
    }

    @media (max-width: 480px) {
      .admin-icon {
        top: 10px;
        right: 10px;
        width: 35px;
        height: 35px;
      }
    }

    .admin-panel {
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      width: 400px;
      height: 90vh;
      overflow-y: auto;
      z-index: 1001;
      position: relative;
    }

    .admin-panel.expanded {
      width: 95%;
      max-width: 1400px;
      height: 95vh;
      background: #f8fafc;
      display: flex;
      flex-direction: column;
      padding: 25px;
      overflow-y: auto;
    }

    .istatistik-kartlar {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
      margin-bottom: 20px;
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      flex-shrink: 0;
    }

    .istatistik-kart {
      background: white;
      padding: 20px;
      border-radius: 12px;
      text-align: center;
      color: #2d3748;
      transition: all 0.3s ease;
      border: 2px solid #e2e8f0;
      position: relative;
      overflow: hidden;
    }

    .istatistik-kart::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, #00A396, #019183);
    }

    .istatistik-kart:hover {
      transform: translateY(-5px);
      border-color: #00A396;
      box-shadow: 0 4px 12px rgba(0, 163, 150, 0.15);
    }

    .kart-sayi {
      font-size: 32px;
      font-weight: bold;
      margin-bottom: 8px;
      color: #00A396;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .kart-ikon {
      font-size: 24px;
      color: #00A396;
      margin-bottom: 12px;
    }

    .kart-baslik {
      font-size: 14px;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 500;
    }

    .grafik-baslik {
      font-size: 18px;
      color: #2d3748;
      margin-bottom: 20px;
      font-weight: 600;
      text-align: center;
    }

    .grafik-bolum {
      min-height: 300px;
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }

    .tablo-container {
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .istatistik-tablo {
      width: 100%;
      border-collapse: collapse;
    }

    .istatistik-tablo th,
    .istatistik-tablo td {
      padding: 12px;
      text-align: center;
      border-bottom: 1px solid #e2e8f0;
    }

    .istatistik-tablo th {
      background: #f8fafc;
      font-weight: 600;
      color: #2d3748;
    }

    .tablo-scroll {
      overflow-x: auto;
      margin-top: 15px;
    }

    .analiz-karti {
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin: 20px 0;
    }

    .kelime-analiz-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-top: 15px;
    }

    .kelime-kutu {
      background: #f8fafc;
      padding: 15px;
      border-radius: 10px;
      border: 1px solid #e2e8f0;
    }

    .kelime-kutu h4 {
      color: #00A396;
      margin-bottom: 10px;
      font-size: 16px;
    }

    .analiz-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-top: 15px;
    }

    .analiz-kutu {
      background: #f8fafc;
      padding: 15px;
      border-radius: 10px;
      border: 1px solid #e2e8f0;
    }

    .kelime-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 12px;
      background: white;
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid #e2e8f0;
      transition: all 0.3s ease;
    }
    
    .kelime-item:hover {
      transform: translateX(5px);
      border-color: #00A396;
      box-shadow: 0 2px 4px rgba(0, 163, 150, 0.1);
    }

    .kelime-item .kelime {
      font-weight: 600;
      color: #2d3748;
    }

    .kelime-item .oran {
      color: #00A396;
      font-weight: 700;
      background: #f0fdf4;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 14px;
    }

    .oyun-sonu-butonlar {
      display: flex;
      gap: 10px;
      margin-top: 15px;
      justify-content: center;
    }

    .cevap-goster-btn, .yeniden-basla-btn {
      padding: 10px 20px;
      border-radius: 25px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s ease;
    }

    .cevap-goster-btn {
      background: #f56565;
      border: 2px solid #f56565;
    }

    .yeniden-basla-btn {
      background: #00A396;
      border: 2px solid #00A396;
    }

    .cevap-goster-btn:hover, .yeniden-basla-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .cevap-goster-btn:hover {
      background: white;
      color: #f56565;
    }

    .yeniden-basla-btn:hover {
      background: white;
      color: #00A396;
    }

    .kunduz-link {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin: 20px auto;
      padding: 12px 24px;
      background: white;
      color: #00A396;
      border: 2px solid #00A396;
      border-radius: 50px;
      font-size: 16px;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s ease;
      width: fit-content;
    }
    
    .kunduz-link:hover {
      background: #00A396;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 163, 150, 0.15);
    }

    .kunduz-link i {
      font-size: 14px;
      transition: transform 0.3s ease;
    }

    .kunduz-link:hover i {
      transform: translateX(-4px);
    }

    .bilgi-btn {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: #00A396;
      font-size: 24px;
      cursor: pointer;
      padding: 5px;
      box-shadow: none;
    }

    .bilgi-btn:hover {
      color: #019183;
      background: none;
      box-shadow: none;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal.show {
      display: flex;
    }

    .modal-content {
      position: relative;
      background-color: #fff;
      margin: 2% auto;
      padding: 20px;
      width: 90%;
      max-width: 500px;
      border-radius: 15px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal-title {
      color: #00A396;
      margin-bottom: 20px;
      font-size: 1.5em;
      text-align: center;
    }

    .modal-section {
      margin-bottom: 15px;
    }

    .modal-section h3 {
      color: #00A396;
      margin-bottom: 10px;
    }

    .ornek-kelime {
      background: #f8fafc;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
    }

    .ornek-satir {
      display: flex;
      gap: 5px;
      justify-content: center;
      margin: 10px 0;
    }

    .ornek-kutu {
      width: 40px;
      height: 40px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 20px;
      font-weight: bold;
      color: white;
      border-radius: 8px;
    }

    .close-modal {
      position: absolute;
      right: 15px;
      top: 10px;
      font-size: 24px;
      color: #64748b;
      cursor: pointer;
    }

    .modal-section ul {
      list-style-type: none;
      padding-left: 0;
      margin-top: 10px;
    }

    .modal-section li {
      padding: 5px 0;
      color: #64748b;
    }

    .admin-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: transparent;
      border: none;
      cursor: pointer;
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 999;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0);
    }

    .admin-button:hover {
      opacity: 1;
      transform: scale(1.05);
      background: white;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .admin-button i {
      font-size: 24px;
      color: #64748b;
      transition: color 0.3s ease;
    }

    .admin-button:hover i {
      color: #00A396;
    }

    .istatistik-filtre {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      align-items: center;
    }

    .filtre-grup {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .filtre-grup label {
      font-size: 14px;
      color: #2d3748;
      font-weight: 500;
    }

    .filtre-grup select,
    .filtre-grup input {
      padding: 8px 12px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-size: 14px;
      background: #f8fafc;
      transition: all 0.3s ease;
    }

    .filtre-grup select:focus,
    .filtre-grup input:focus {
      outline: none;
      border-color: #00A396;
      background: white;
    }

    .filtre-uygula {
      padding: 8px 20px;
      background: #00A396;
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .filtre-uygula:hover {
      background: #019183;
      transform: translateY(-2px);
    }
  </style>
</head>
<body>
  <!-- Admin Panel -->
  <div class="admin-overlay" id="adminOverlay" style="display: none;">
    <div class="admin-panel">
      <div id="adminLogin">
        <span class="login-close" onclick="toggleAdmin(false)">×</span>
        <h2>Admin Girişi</h2>
        <div class="admin-login">
          <div class="admin-input-group">
            <i class="fas fa-user"></i>
            <input type="text" id="adminUser" placeholder="E-posta">
          </div>
          <div class="admin-input-group">
            <i class="fas fa-lock"></i>
            <input type="password" id="adminPass" placeholder="Şifre">
          </div>
          <button onclick="adminGiris()">Giriş Yap</button>
        </div>
      </div>
      <div id="adminContent" style="display: none;">
        <div class="admin-header">
          <h2>Admin Paneli</h2>
          <div class="admin-buttons">
            <button class="admin-logout" onclick="adminCikis()">
              <span>Çıkış</span>
            </button>
            <span class="admin-close" onclick="toggleAdmin(false)">×</span>
          </div>
        </div>
        <div class="admin-content">
          <div class="kelime-ve-istatistik">
            <div class="kelime-bolumu">
              <h2>Haftalık Kelime Listesi</h2>
              <div class="kelime-grid">
                <div class="kelime-gun">
                  <span class="gun-label">Pazartesi:</span>
                  <div class="kelime-input-grup">
                    <input type="text" id="kelime0" maxlength="10" placeholder="Kelime girin...">
                  </div>
                </div>
                <div class="kelime-gun">
                  <span class="gun-label">Salı:</span>
                  <div class="kelime-input-grup">
                    <input type="text" id="kelime1" maxlength="10" placeholder="Kelime girin...">
                  </div>
                </div>
                <div class="kelime-gun">
                  <span class="gun-label">Çarşamba:</span>
                  <div class="kelime-input-grup">
                    <input type="text" id="kelime2" maxlength="10" placeholder="Kelime girin...">
                  </div>
                </div>
                <div class="kelime-gun">
                  <span class="gun-label">Perşembe:</span>
                  <div class="kelime-input-grup">
                    <input type="text" id="kelime3" maxlength="10" placeholder="Kelime girin...">
                  </div>
                </div>
                <div class="kelime-gun">
                  <span class="gun-label">Cuma:</span>
                  <div class="kelime-input-grup">
                    <input type="text" id="kelime4" maxlength="10" placeholder="Kelime girin...">
                  </div>
                </div>
                <div class="kelime-gun">
                  <span class="gun-label">Cumartesi:</span>
                  <div class="kelime-input-grup">
                    <input type="text" id="kelime5" maxlength="10" placeholder="Kelime girin...">
                  </div>
                </div>
                <div class="kelime-gun">
                  <span class="gun-label">Pazar:</span>
                  <div class="kelime-input-grup">
                    <input type="text" id="kelime6" maxlength="10" placeholder="Kelime girin...">
                  </div>
                </div>
              </div>
              <button class="kelime-kaydet" onclick="kelimeleriKaydet()">Kelimeleri Kaydet</button>
            </div>
            <div class="istatistik-bolumu">
              <h2>Oyun İstatistikleri</h2>
              <div class="istatistik-filtre">
                <div class="filtre-grup">
                  <label for="tarih-araligi">Tarih Aralığı:</label>
                  <select id="tarih-araligi">
                    <option value="7">Son 7 Gün</option>
                    <option value="30">Son 30 Gün</option>
                    <option value="90">Son 90 Gün</option>
                    <option value="ozel">Özel Tarih Aralığı</option>
                  </select>
                </div>
                <div class="filtre-grup" id="ozel-tarih" style="display: none;">
                  <label for="baslangic-tarihi">Başlangıç:</label>
                  <input type="date" id="baslangic-tarihi">
                </div>
                <div class="filtre-grup" id="ozel-tarih-bitis" style="display: none;">
                  <label for="bitis-tarihi">Bitiş:</label>
                  <input type="date" id="bitis-tarihi">
                </div>
                <button class="filtre-uygula" onclick="istatistikleriFiltrele()">Filtrele</button>
              </div>
              <div class="istatistik-kartlar" style="grid-template-columns: repeat(2, 1fr);">
                <div class="istatistik-kart">
                  <div class="kart-ikon"><i class="fas fa-users"></i></div>
                  <div class="kart-sayi" id="toplamOyuncuSayi">0</div>
                  <div class="kart-baslik">Toplam Oyuncu</div>
                </div>
                <div class="istatistik-kart">
                  <div class="kart-ikon"><i class="fas fa-arrow-left"></i></div>
                  <div class="kart-sayi" id="kunduzDonTiklama">0</div>
                  <div class="kart-baslik">Kunduz'a Dön Tıklama</div>
                </div>
              </div>
              <div class="grafik-container" style="grid-template-columns: 1fr;">
                <div class="grafik-bolum">
                  <h3 class="grafik-baslik">Günlük Oyuncu Sayısı ve Kunduz'a Dön Tıklamaları</h3>
                  <canvas id="gunlukGrafik"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Admin butonu -->
  <button class="admin-button" onclick="toggleAdmin(true)">
    <i class="fas fa-user-cog"></i>
  </button>

  <div class="container">
    <div id="oyun-alani">
      <div class="oyun-header">
        <img src="https://play-lh.googleusercontent.com/25xCKG_GB7Cbeo7h1znN3Kr0yTQev9KtxEIIl3s2zjZEuyXa8XDQ80tVQhZL0iLKAjfo" alt="Kunduz Logo">
        <h1>Kunduz Kelime Keşfi</h1>
        <button id="bilgi-butonu" class="bilgi-btn">
          <i class="fas fa-info-circle"></i>
        </button>
      </div>
      <div class="aciklama">
        Günlük kelimeyi <span class="vurgula">6 denemede</span> doğru tahmin etmeye çalışın. Harf kutularının renklerine dikkat edin:
        <ul>
          <li><span class="vurgula yesil-vurgula">Yeşil:</span> Harf doğru ve doğru konumda!</li>
          <li><span class="vurgula sari-vurgula">Sarı:</span> Harf doğru ama yanlış konumda!</li>
          <li><span class="vurgula gri-vurgula">Gri:</span> Harf yanlış!</li>
        </ul>
        En az denemede doğru kelimeyi bularak puanınızı artırın! 🎯
      </div>

      <div id="oyun-tablosu"></div>
      <div id="giris-alani">
        <input type="text" id="tahmin-girdisi" placeholder="Tahmininizi Buraya Yazabilirsiniz 💫" maxlength="gizliKelime.length">
        <button id="gonder-tusu">Gönder</button>
      </div>

      <div class="mesaj-kutusu" id="uyari-mesaji"></div>
      <button id="yeniden-baslat-tusu" style="display: none;">Denemeye Devam Et</button>

      <div class="istatistik-ayirici"></div>

      <div class="sonuc-gorsel" style="display: block;">
        <div class="header">
          <img src="https://play-lh.googleusercontent.com/25xCKG_GB7Cbeo7h1znN3Kr0yTQev9KtxEIIl3s2zjZEuyXa8XDQ80tVQhZL0iLKAjfo" alt="Kunduz Logo">
          <h2>Kunduz Kelime Keşfi Sonuçlarım</h2>
        </div>
        <div class="skor-grid">
          <div class="skor-item">
            <div class="baslik">Kazanılan</div>
            <div class="deger" id="kazanma-sayisi">0</div>
          </div>
          <div class="skor-item">
            <div class="baslik">Başarı Puanı</div>
            <div class="deger" id="kazanma-orani">0%</div>
          </div>
          <div class="skor-item">
            <div class="baslik">Toplam Tahmin</div>
            <div class="deger" id="toplam-tahmin">0</div>
          </div>
          <div class="skor-item">
            <div class="baslik">Oyun Süresi</div>
            <div class="deger" id="oyun-suresi">0 sn</div>
          </div>
        </div>
      </div>

      <button class="save-stats-btn" onclick="istatistikleriKaydet()">
        <i class="fas fa-download"></i>
        <span>Paylaşmak İçin İstatistiklerinizi Kaydedin</span>
      </button>

      <a href="https://t.kndz.link/uF4J" class="kunduz-link" onclick="kunduzDonTiklamaKaydet(event)" ontouchend="kunduzDonTiklamaKaydet(event)">
    <i class="fas fa-arrow-left"></i>
    <span>Kunduz'a Dön</span>
</a>
    </div>
  </div>

  <div id="bilgi-modal" class="modal">
    <div class="modal-content">
      <span class="close-modal">×</span>
      <h2 class="modal-title">Nasıl Oynanır?</h2>
      
      <div class="modal-section">
        <h3>Oyun Kuralları</h3>
        <ul>
          <li>Her gün yeni bir kelime belirlenir.</li>
          <li>Kelimenin uzunluğu kadar harf girmeniz gerekir.</li>
          <li>Toplam 6 deneme hakkınız vardır.</li>
        </ul>
      </div>
      
      <div class="modal-section">
        <h3>Renklerin Anlamları</h3>
        <div class="ornek-kelime">
          <p>Örnek: Gizli kelime "DERS" iken "DOST" tahmini yapılırsa:</p>
          <div class="ornek-satir">
            <div class="ornek-kutu yesil">D</div>
            <div class="ornek-kutu gri">O</div>
            <div class="ornek-kutu sari">S</div>
            <div class="ornek-kutu gri">T</div>
          </div>
        </div>
        <ul>
          <li><span class="yesil-vurgula">Yeşil (D):</span> Harf doğru yerde</li>
          <li><span class="sari-vurgula">Sarı (S):</span> Harf var ama yanlış yerde</li>
          <li><span class="gri-vurgula">Gri (O,T):</span> Harf kelimede yok</li>
        </ul>
      </div>
      
      <div class="modal-section">
        <h3>Puanlama</h3>
        <div class="ornek-puan">
          <p>Örnek puanlama:</p>
          <ul>
            <li>1. denemede: 100 puan</li>
            <li>3. denemede (45 sn): 65 puan</li>
            <li>6. denemede (120 sn): 30 puan</li>
          </ul>
        </div>
        <ul>
          <li>Her fazla deneme için 10 puan düşer</li>
          <li>Her 30 saniye için 5 puan düşer</li>
          <li>İlk denemede bilirseniz bonus puan!</li>
        </ul>
      </div>
    </div>
  </div>

  <script>
    // Firebase yapılandırması
    const firebaseConfig = {
      apiKey: "AIzaSyCLgbrYik8Q0YGhVD52rPzE7k5iGVXmO34",
      authDomain: "kunduz-kelime-kesfi.firebaseapp.com",
      projectId: "kunduz-kelime-kesfi",
      storageBucket: "kunduz-kelime-kesfi.appspot.com",
      messagingSenderId: "1002683245165",
      appId: "1:1002683245165:web:b35a8fea91be8451641564"
    };

    // Firebase'i başlat
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();

    // Güvenlik için input sanitizasyon fonksiyonu
    function sanitizeInput(input) {
      const div = document.createElement('div');
      div.textContent = input;
      return div.innerHTML;
    }

    // Anonim giriş fonksiyonu
    async function anonimGirisYap() {
      try {
        if (!auth.currentUser) { // Eğer zaten bir kullanıcı yoksa
          const userCredential = await auth.signInAnonymously();
          console.log('Anonim giriş başarılı:', userCredential.user.uid);
          return true;
        }
        return true; // Zaten bir kullanıcı varsa devam et
      } catch (error) {
        console.error('Anonim giriş hatası:', error);
        return false;
      }
    }

    async function kelimeListesiniKaydet(liste) {
      try {
        if (!liste || liste.length === 0) {
          throw new Error('Geçersiz kelime listesi');
        }
        const sanitizedListe = liste.map(kelime => sanitizeInput(kelime));
        await db.collection('kelimeler').doc('haftalik').set({ liste: sanitizedListe });
        defaultKelimeler = sanitizedListe;
        gizliKelime = defaultKelimeler[new Date().getDay()];
        console.log('Kelime listesi başarıyla kaydedildi:', sanitizedListe);
        return true;
      } catch (error) {
        console.error('Kelime listesi kaydedilirken hata:', error);
        return false;
      }
    }

    async function istatistikKaydet(veri) {
      try {
        const bugun = new Date();
        bugun.setHours(0, 0, 0, 0);
        const tarihStr = bugun.toISOString().split('T')[0];
        const docRef = db.collection('istatistikler').doc(tarihStr);

        const doc = await docRef.get();
        const mevcutVeri = doc.exists ? doc.data() : { 
          oyuncuSayisi: 0, 
          kunduzDonTiklama: 0, 
          toplamOyun: 0,
          kazanilanOyun: 0,
          ortalamaDenemeSayisi: 0,
          basariOrani: 0,
          tarih: firebase.firestore.Timestamp.fromDate(bugun) 
        };

        await docRef.set({
          oyuncuSayisi: mevcutVeri.oyuncuSayisi + (veri.oyuncuSayisi || 0),
          kunduzDonTiklama: mevcutVeri.kunduzDonTiklama + (veri.kunduzDonTiklama || 0),
          toplamOyun: mevcutVeri.toplamOyun + (veri.toplamOyun || 0),
          kazanilanOyun: mevcutVeri.kazanilanOyun + (veri.kazanilanOyun || 0),
          ortalamaDenemeSayisi: veri.denemeSayisi ? 
            (mevcutVeri.ortalamaDenemeSayisi * mevcutVeri.toplamOyun + veri.denemeSayisi) / (mevcutVeri.toplamOyun + 1) : 
            mevcutVeri.ortalamaDenemeSayisi,
          basariOrani: veri.basariOrani || mevcutVeri.basariOrani,
          tarih: firebase.firestore.Timestamp.fromDate(bugun)
        }, { merge: true });

        return true;
      } catch (error) {
        console.error('İstatistik kaydedilirken hata:', error);
        return false;
      }
    }

async function kunduzDonTiklamaKaydet(event) {
  event.preventDefault();
  console.log('Kunduz\'a Dön butonuna tıklandı, kayıt başlıyor...');
  const link = event.target.closest('a');

  try {
    if (!auth.currentUser) {
      throw new Error('Kullanıcı kimliği doğrulanmamış, auth.currentUser null.');
    }
    const userId = auth.currentUser.uid;
    console.log('Kullanıcı ID:', userId);
    const bugun = new Date().toISOString().split('T')[0];
    const docId = `${userId}_${bugun}`;
    
    const tiklamaDoc = await db.collection('kunduz_tiklamalari').doc(docId).get();
    console.log('Tiklama kontrolü yapıldı, mevcut:', tiklamaDoc.exists);
    if (!tiklamaDoc.exists) {
      await db.collection('kunduz_tiklamalari').doc(docId).set({
        tiklandi: true,
        date: bugun,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      });
      console.log('Kullanıcı tıklaması kaydedildi (kunduz_tiklamalari)');

      const basarili = await istatistikKaydet({ kunduzDonTiklama: 1 });
      if (basarili) {
        console.log('Genel istatistik kaydedildi (istatistikler)');
        if (document.getElementById('adminContent').style.display === 'block') {
          const istatistikler = await istatistikleriGetir();
          guncelleIstatistikGoruntuleri(istatistikler);
        }
      } else {
        throw new Error('İstatistik kaydı başarısız (istatistikler)');
      }
    } else {
      console.log('Kullanıcı bugün zaten tıkladı');
    }
  } catch (error) {
    console.error('Kunduz\'a Dön tıklama kaydı başarısız:', error);
    mesajGoster('İstatistik kaydedilemedi: ' + error.message, false);
  }

  // Kayıt tamamlandıktan sonra yönlendir
  if (link && link.href) {
    console.log('Yönlendirme yapılıyor:', link.href);
    window.location.href = link.href;
  } else {
    console.error('Yönlendirme başarısız, link bulunamadı.');
  }
}

    async function istatistikleriGetir(gunSayisi = 7, baslangicTarihi = null, bitisTarihi = null) {
      try {
        const bugun = new Date();
        bugun.setHours(0, 0, 0, 0);
        let baslangic, bitis;

        if (baslangicTarihi && bitisTarihi) {
          baslangic = new Date(baslangicTarihi);
          bitis = new Date(bitisTarihi);
          baslangic.setHours(0, 0, 0, 0);
          bitis.setHours(23, 59, 59, 999);
        } else {
          baslangic = new Date(bugun.getTime() - (gunSayisi * 24 * 60 * 60 * 1000));
          bitis = bugun;
        }

        const snapshot = await db.collection('istatistikler')
          .where('tarih', '>=', firebase.firestore.Timestamp.fromDate(baslangic))
          .where('tarih', '<=', firebase.firestore.Timestamp.fromDate(bitis))
          .orderBy('tarih', 'asc')
          .get();

        const istatistikler = [];
        snapshot.forEach(doc => {
          const veri = doc.data();
          istatistikler.push({
            tarih: veri.tarih.toDate().toISOString().split('T')[0],
            oyuncuSayisi: veri.oyuncuSayisi || 0,
            kunduzDonTiklama: veri.kunduzDonTiklama || 0,
            toplamOyun: veri.toplamOyun || 0,
            kazanilan: veri.kazanilanOyun || 0,
            ortDeneme: veri.ortalamaDenemeSayisi || 0,
            basariOrani: veri.basariOrani || 0
          });
        });
        return istatistikler;
      } catch (error) {
        console.error('İstatistikler alınırken hata:', error);
        return [];
      }
    }

    function toggleAdmin(show) {
      const overlay = document.getElementById('adminOverlay');
      if (overlay) {
        overlay.style.display = show ? 'flex' : 'none';
        if (show) {
          document.getElementById('adminLogin').style.display = 'block';
          document.getElementById('adminContent').style.display = 'none';
          document.getElementById('adminUser').value = '';
          document.getElementById('adminPass').value = '';
        }
      }
    }

    async function adminGiris() {
      const email = sanitizeInput(document.getElementById('adminUser').value);
      const password = sanitizeInput(document.getElementById('adminPass').value);

      try {
        const userCredential = await auth.signInWithEmailAndPassword(email, password);
        console.log('Admin girişi başarılı:', userCredential.user.email);
        localStorage.setItem('adminOturum', 'true');
        document.getElementById('adminLogin').style.display = 'none';
        document.getElementById('adminContent').style.display = 'block';
        document.querySelector('.admin-panel').classList.add('expanded');
        kelimeListesiniGoster();
        istatistikleriGetir().then(istatistikler => {
          guncelleIstatistikGoruntuleri(istatistikler);
        });
      } catch (error) {
        console.error('Admin giriş hatası:', error);
        localStorage.removeItem('adminOturum');
        alert('Hatalı e-posta veya şifre: ' + error.message);
      }
    }

    function adminCikis() {
      auth.signOut().then(() => {
        console.log('Admin çıkış yaptı');
        localStorage.removeItem('adminOturum');
        document.getElementById('adminLogin').style.display = 'block';
        document.getElementById('adminContent').style.display = 'none';
        document.querySelector('.admin-panel').classList.remove('expanded');
        document.getElementById('adminUser').value = '';
        document.getElementById('adminPass').value = '';
        toggleAdmin(false);
        anonimGirisYap(); // Admin çıkışından sonra anonim girişi başlat
      }).catch(error => {
        console.error('Çıkış hatası:', error);
      });
    }

    if (localStorage.getItem('adminOturum') === 'true') {
      auth.onAuthStateChanged(user => {
        if (user && user.email === 'admin@example.com') {
          document.getElementById('adminLogin').style.display = 'none';
          document.getElementById('adminContent').style.display = 'block';
          document.querySelector('.admin-panel').classList.add('expanded');
          kelimeListesiniGoster();
          istatistikleriGetir().then(istatistikler => {
            guncelleIstatistikGoruntuleri(istatistikler);
          });
        } else {
          localStorage.removeItem('adminOturum');
        }
      });
    }

    // Global değişkenler
    let defaultKelimeler = [];
    let gizliKelime;
    let kazanmaSayisi = 0;
    let oyunSayisi = 0;
    let toplamTahmin = 0;
    let kazanmaOrani = 0;
    let baslangicZamani = null;
    let mevcutSatir = 0;
    let oyunBitti = false;
    let oncekiSure = 0;
    let sureSayaci = null;
    let ilkOyun = true;
    let sonSure = 0;

      function sureyiGuncelle() {
      if (baslangicZamani && !oyunBitti) {
        const simdikiZaman = new Date();
        const gecenSure = Math.floor((simdikiZaman - baslangicZamani) / 1000);
        sonSure = gecenSure + oncekiSure;
        document.getElementById('oyun-suresi').textContent = `${sonSure} sn`;
      }
    }

    window.cevabıGoster = function() {
      const mesajKutusu = document.getElementById("uyari-mesaji");
      mesajKutusu.textContent = `Doğru kelime: ${sanitizeInput(gizliKelime)}`;
      mesajKutusu.className = "mesaj-kutusu mesaj-hata";
      mesajKutusu.style.display = "block";
    }

    window.yenidenBasla = function() {
      if (sureSayaci) {
        clearInterval(sureSayaci);
        sureSayaci = null;
      }
      oncekiSure = sonSure;
      mevcutSatir = 0;
      oyunBitti = false;
      if (!ilkOyun) {
        baslangicZamani = new Date();
        sureSayaci = setInterval(sureyiGuncelle, 1000);
      } else {
        baslangicZamani = null;
      }
      const butonlar = document.querySelector('.oyun-sonu-butonlar');
      if (butonlar) {
        butonlar.remove();
      }
      const mesajKutusu = document.getElementById("uyari-mesaji");
      mesajKutusu.style.display = "none";
      gizliKelime = defaultKelimeler[new Date().getDay()];
      const kutular = document.querySelectorAll('.harf-kutusu');
      kutular.forEach(kutu => {
        kutu.textContent = '';
        kutu.className = 'harf-kutusu';
      });
      document.getElementById("tahmin-girdisi").value = '';
    }

    window.gosterOyunSonuSecenekleri = function() {
      const eskiButonlar = document.querySelector('.oyun-sonu-butonlar');
      if (eskiButonlar) {
        eskiButonlar.remove();
      }
      const butonContainer = document.createElement('div');
      butonContainer.className = 'oyun-sonu-butonlar';
      if (mevcutSatir >= 6) {
        butonContainer.innerHTML = `
          <button class="cevap-goster-btn" onclick="cevabıGoster()">
            <i class="fas fa-eye"></i> Cevabı Gör
          </button>
          <button class="yeniden-basla-btn" onclick="yenidenBasla()">
            <i class="fas fa-redo"></i> Denemeye Devam Et
          </button>
        `;
      }
      document.getElementById('giris-alani').appendChild(butonContainer);
    }

    async function kelimeListesiniGetir() {
      try {
        const doc = await db.collection('kelimeler').doc('haftalik').get();
        if (doc.exists && doc.data().liste) {
          return doc.data().liste;
        }
        return ["kurs", "ders", "eğitim", "okul", "konu", "sınav", "kunduz"];
      } catch (error) {
        console.error('Kelime listesi alınırken hata:', error);
        return ["kurs", "ders", "eğitim", "okul", "konu", "sınav", "kunduz"];
      }
    }

    document.addEventListener("DOMContentLoaded", async () => {
      const girisBasarili = await anonimGirisYap();
      if (!girisBasarili) {
        console.error('Anonim giriş başarısız, oyun çalışmayabilir.');
        mesajGoster('Bağlantı hatası, lütfen tekrar deneyin.', false);
        return;
      }

      try {
        const kelimeler = await kelimeListesiniGetir();
        defaultKelimeler = kelimeler;
        gizliKelime = defaultKelimeler[new Date().getDay()];
        tabloyuOlustur();
      } catch (error) {
        console.error('Başlangıç kelime listesi alınırken hata:', error);
        defaultKelimeler = ["kurs", "ders", "eğitim", "okul", "konu", "sınav", "kunduz"];
        gizliKelime = defaultKelimeler[new Date().getDay()];
        tabloyuOlustur();
      }

      istatistikleriGetir().then(istatistikler => {
        if (istatistikler.length > 0) {
          guncelleIstatistikGoruntuleri(istatistikler);
        }
      }).catch(error => {
        console.error('İstatistikler alınırken hata:', error);
      });

      const gonderTusu = document.getElementById("gonder-tusu");
      const yenidenBaslatTusu = document.getElementById("yeniden-baslat-tusu");
      const tahminGirdisi = document.getElementById("tahmin-girdisi");
      const uyariMesaji = document.getElementById("uyari-mesaji");
      const kazanmaSayisiEl = document.getElementById("kazanma-sayisi");
      const kazanmaOraniEl = document.getElementById("kazanma-orani");
      const toplamTahminEl = document.getElementById("toplam-tahmin");

      function mesajGoster(mesaj, basarili = true) {
        uyariMesaji.textContent = mesaj;
        uyariMesaji.className = "mesaj-kutusu " + (basarili ? "mesaj-basarili" : "mesaj-hata");
        uyariMesaji.style.display = "block";
        setTimeout(() => {
          uyariMesaji.style.display = "none";
        }, 5000);
      }

      function tabloyuOlustur() {
        const tablo = document.getElementById("oyun-tablosu");
        tablo.innerHTML = "";
        const harfSayisi = gizliKelime ? gizliKelime.length : 5;

        for (let i = 0; i < 6; i++) {
          const satir = document.createElement("div");
          satir.classList.add("satir");

          for (let j = 0; j < harfSayisi; j++) {
            const kutu = document.createElement("div");
            kutu.classList.add("harf-kutusu");
            satir.appendChild(kutu);
          }

          tablo.appendChild(satir);
        }
      }

      function tahminYap() {
        if (oyunBitti) return;

        const tahmin = sanitizeInput(tahminGirdisi.value.trim().toLocaleLowerCase("tr-TR"));
        
        if (tahmin.length !== gizliKelime.length) {
          mesajGoster(`Lütfen ${gizliKelime.length} harf girin!`, false);
          return;
        }

        if (!baslangicZamani) {
          baslangicZamani = new Date();
          sureSayaci = setInterval(sureyiGuncelle, 1000);
          ilkOyun = false;
          istatistikKaydet({ oyuncuSayisi: 1 });
        }

        toplamTahmin++;
        toplamTahminEl.textContent = toplamTahmin;

        const mevcutSatirKutular = document.querySelectorAll(".satir")[mevcutSatir].children;
        
        const harfDurumu = new Array(gizliKelime.length).fill('gri');
        const harfSayisi = {};
        
        for (let i = 0; i < gizliKelime.length; i++) {
          harfSayisi[gizliKelime[i]] = (harfSayisi[gizliKelime[i]] || 0) + 1;
        }
        
        for (let i = 0; i < gizliKelime.length; i++) {
          if (tahmin[i] === gizliKelime[i]) {
            harfDurumu[i] = 'yesil';
            harfSayisi[tahmin[i]]--;
          }
        }
        
        for (let i = 0; i < gizliKelime.length; i++) {
          if (harfDurumu[i] !== 'yesil') {
            if (harfSayisi[tahmin[i]] > 0) {
              harfDurumu[i] = 'sari';
              harfSayisi[tahmin[i]]--;
            }
          }
        }
        
        for (let i = 0; i < gizliKelime.length; i++) {
          const kutu = mevcutSatirKutular[i];
          kutu.textContent = tahmin[i];
          kutu.className = 'harf-kutusu ' + harfDurumu[i];
        }

        mevcutSatir++;
        tahminGirdisi.value = "";

        if (tahmin === gizliKelime) {
          const bitisZamani = new Date();
          const gecenSure = Math.floor((bitisZamani - baslangicZamani) / 1000);
          sonSure = gecenSure + oncekiSure;
          const basariPuani = hesaplaBasariPuani(toplamTahmin, sonSure);

          kazanmaSayisi++;
          kazanmaSayisiEl.textContent = kazanmaSayisi;
          oyunSayisi++;
          kazanmaOrani = basariPuani;
          kazanmaOraniEl.textContent = `${kazanmaOrani}%`;
          document.getElementById('oyun-suresi').textContent = `${sonSure} sn`;
          oyunBitti = true;
          istatistikKaydet({
            kazandi: true,
            denemeSayisi: mevcutSatir,
            kelime: gizliKelime,
            oyuncuSayisi: 1,
            toplamOyun: 1,
            kazanilanOyun: 1,
            ortalamaDenemeSayisi: mevcutSatir,
            basariOrani: basariPuani,
            tahminSuresi: sonSure
          });
          const denemeSayisi = toplamTahmin === 1 ? 'ilk' : `${toplamTahmin}.`;
          mesajGoster(`Harika! ${denemeSayisi} denemede buldunuz! 🎉 Başarı puanınız: ${basariPuani}%`, true);
          setTimeout(() => {
            gosterOyunSonuSecenekleri();
          }, 2000);
          clearInterval(sureSayaci);
        } else if (mevcutSatir >= 6) {
          const bitisZamani = new Date();
          const gecenSure = Math.floor((bitisZamani - baslangicZamani) / 1000);
          sonSure = gecenSure + oncekiSure;
          oyunSayisi++;
          kazanmaOrani = Math.round((kazanmaSayisi / oyunSayisi) * 100);
          kazanmaOraniEl.textContent = `${kazanmaOrani}%`;
          document.getElementById('oyun-suresi').textContent = `${sonSure} sn`;
          oyunBitti = true;
          mesajGoster("Maalesef bilemediniz!", false);
          gosterOyunSonuSecenekleri();
          clearInterval(sureSayaci);
        }
      }

      gonderTusu.addEventListener("click", tahminYap);

      tahminGirdisi.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          tahminYap();
        }
      });

      yenidenBaslatTusu.addEventListener("click", yenidenBasla);

      tabloyuOlustur();

      window.kelimeleriKaydet = async function() {
        const kelimeListesi = [];
        const gunSirasi = [1, 2, 3, 4, 5, 6, 0];
        for (let i = 0; i < 7; i++) {
          const kelime = sanitizeInput(document.getElementById(`kelime${i}`).value.trim().toLowerCase());
          if (!kelime) {
            alert('Lütfen tüm günler için kelime girin!');
            return;
          }
          kelimeListesi[gunSirasi[i]] = kelime;
        }
        
        try {
          const basarili = await kelimeListesiniKaydet(kelimeListesi);
          if (basarili) {
            defaultKelimeler = kelimeListesi;
            alert('Kelime listesi başarıyla kaydedildi!');
          } else {
            throw new Error('Kelime listesi kaydedilemedi.');
          }
        } catch (error) {
          console.error('Kelime listesi kaydetme hatası:', error);
          alert('Kelime listesi kaydedilirken hata oluştu: ' + error.message);
        }
      }

      window.kelimeListesiniGoster = async function() {
        let kelimeler = await kelimeListesiniGetir();
        const gunSirasi = [1, 2, 3, 4, 5, 6, 0];
        for (let i = 0; i < 7; i++) {
          const input = document.getElementById(`kelime${i}`);
          if (input) {
            input.value = kelimeler[gunSirasi[i]];
          }
        }
      }

      const tarihAraligiSelect = document.getElementById('tarih-araligi');
      if (tarihAraligiSelect) {
        tarihAraligiSelect.addEventListener('change', (e) => {
          const ozelTarihDiv = document.getElementById('ozel-tarih');
          const ozelTarihBitisDiv = document.getElementById('ozel-tarih-bitis');
          if (e.target.value === 'ozel') {
            ozelTarihDiv.style.display = 'block';
            ozelTarihBitisDiv.style.display = 'block';
          } else {
            ozelTarihDiv.style.display = 'none';
            ozelTarihBitisDiv.style.display = 'none';
            istatistikleriFiltrele();
          }
        });
      }

      istatistikleriFiltrele();
    });

    async function istatistikleriKaydet() {
      const gorsel = document.querySelector('.sonuc-gorsel');
      const logoImg = gorsel.querySelector('img');
      
      try {
        const response = await fetch(logoImg.src);
        const blob = await response.blob();
        const reader = new FileReader();
        await new Promise((resolve, reject) => {
          reader.onload = resolve;
          reader.onerror = reject;
          reader.readAsDataURL(blob);
        });
        logoImg.src = reader.result;
      } catch (error) {
        console.error('Logo yüklenirken hata:', error);
      }
      
      gorsel.style.position = 'fixed';
      gorsel.style.top = '50%';
      gorsel.style.left = '50%';
      gorsel.style.transform = 'translate(-50%, -50%)';
      gorsel.style.width = '450px';
      gorsel.style.background = 'white';
      gorsel.style.zIndex = '-1000';
      
      await new Promise((resolve) => {
        if (logoImg.complete) {
          resolve();
        } else {
          logoImg.onload = resolve;
        }
      });
      
      try {
        const canvas = await html2canvas(gorsel, {
          useCORS: true,
          allowTaint: true,
          backgroundColor: '#ffffff',
          scale: 2,
          logging: false,
          onclone: (clonedDoc) => {
            const clonedGorsel = clonedDoc.querySelector('.sonuc-gorsel');
            clonedGorsel.style.transform = 'none';
            clonedGorsel.style.position = 'static';
            const clonedLogo = clonedGorsel.querySelector('img');
            clonedLogo.src = logoImg.src;
          }
        });
        
        const dataUrl = canvas.toDataURL('image/png');
        const link = document.createElement('a');
        link.download = 'kunduz-kelime-kesfi-istatistiklerim.png';
        link.href = dataUrl;
        link.click();
      } catch (error) {
        console.error('Görsel kaydedilirken hata oluştu:', error);
        alert('Görsel kaydedilirken hata oluştu. Lütfen tekrar deneyin.');
      } finally {
        gorsel.style.position = '';
        gorsel.style.top = '';
        gorsel.style.left = '';
        gorsel.style.transform = '';
        gorsel.style.width = '';
        gorsel.style.background = '';
        gorsel.style.zIndex = '';
        logoImg.src = 'https://play-lh.googleusercontent.com/25xCKG_GB7Cbeo7h1znN3Kr0yTQev9KtxEIIl3s2zjZEuyXa8XDQ80tVQhZL0iLKAjfo';
      }
    }

    async function guncelleIstatistikGoruntuleri(istatistikler) {
      if (!istatistikler.length) return;

      const toplamOyuncu = istatistikler.reduce((sum, stat) => sum + stat.oyuncuSayisi, 0);
      const toplamKunduzDon = istatistikler.reduce((sum, stat) => sum + stat.kunduzDonTiklama, 0);

      document.getElementById('toplamOyuncuSayi').textContent = toplamOyuncu.toLocaleString();
      document.getElementById('kunduzDonTiklama').textContent = toplamKunduzDon.toLocaleString();

      if (window.charts) {
        Object.values(window.charts).forEach(chart => chart && chart.destroy());
      }
      window.charts = {};

      const gunlukCtx = document.getElementById('gunlukGrafik').getContext('2d');
      window.charts.gunluk = new Chart(gunlukCtx, {
        type: 'line',
        data: {
          labels: istatistikler.map(stat => stat.tarih),
          datasets: [{
            label: 'Oyuncu Sayısı',
            data: istatistikler.map(stat => stat.oyuncuSayisi),
            borderColor: '#00A396',
            backgroundColor: 'rgba(0, 163, 150, 0.1)',
            fill: true,
            tension: 0.4
          }, {
            label: 'Kunduz\'a Dön Tıklamaları',
            data: istatistikler.map(stat => stat.kunduzDonTiklama),
            borderColor: '#FABE00',
            backgroundColor: 'rgba(250, 190, 0, 0.1)',
            fill: true,
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { position: 'bottom' },
            tooltip: {
              backgroundColor: 'rgba(0, 0, 0, 0.8)',
              padding: 12,
              titleFont: { size: 14 },
              bodyFont: { size: 13 }
            }
          }
        }
      });
    }

    async function istatistikleriFiltrele() {
      const secim = document.getElementById('tarih-araligi').value;
      let istatistikler;

      if (secim === 'ozel') {
        const baslangic = document.getElementById('baslangic-tarihi').value;
        const bitis = document.getElementById('bitis-tarihi').value;
        if (!baslangic || !bitis) {
          alert('Lütfen başlangıç ve bitiş tarihlerini seçin!');
          return;
        }
        istatistikler = await istatistikleriGetir(null, baslangic, bitis);
      } else {
        istatistikler = await istatistikleriGetir(parseInt(secim));
      }

      guncelleIstatistikGoruntuleri(istatistikler);
    }

    function hataYonet(error, mesaj) {
      console.error(mesaj, error);
      mesajGoster(mesaj, false);
    }

    db.enableNetwork().catch(error => {
      hataYonet(error, 'Firebase bağlantısı kurulamadı. Lütfen internet bağlantınızı kontrol edin.');
    });

    function hesaplaBasariPuani(denemeSayisi, sure) {
      let puan = 100;
      if (toplamTahmin > 1) {
        puan -= (toplamTahmin - 1) * 10;
      }
      if (sure > 30) {
        puan -= Math.floor((sure - 30) / 30) * 5;
      }
      return Math.max(0, Math.min(100, puan));
    }

    const bilgiModal = document.getElementById('bilgi-modal');
    const bilgiBtn = document.getElementById('bilgi-butonu');
    const closeModal = document.querySelector('.close-modal');

    bilgiBtn.onclick = function() {
      bilgiModal.classList.add('show');
    }

    document.querySelector('.close-modal').onclick = function() {
      bilgiModal.classList.remove('show');
    }

    window.onclick = function(event) {
      if (event.target == bilgiModal) {
        bilgiModal.classList.remove('show');
      }
    }

    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        bilgiModal.classList.remove('show');
      }
    });

    window.onload = function() {
      bilgiModal.classList.add('show');
    }

    function tahminKontrol(tahmin) {
      const sonuc = Array(tahmin.length).fill('gri');
      const gizliHarfSayisi = {};

      for (let harf of gizliKelime) {
        gizliHarfSayisi[harf] = (gizliHarfSayisi[harf] || 0) + 1;
      }

      for (let i = 0; i < tahmin.length; i++) {
        if (tahmin[i] === gizliKelime[i]) {
          sonuc[i] = 'yesil';
          gizliHarfSayisi[tahmin[i]]--;
        }
      }

      for (let i = 0; i < tahmin.length; i++) {
        if (sonuc[i] !== 'yesil' && gizliHarfSayisi[tahmin[i]] > 0) {
          sonuc[i] = 'sari';
          gizliHarfSayisi[tahmin[i]]--;
        }
      }

      return sonuc;
    }

    // Firebase Güvenlik Kuralları Önerisi (Firebase konsolunda uygulanmalı):
    /*
    rules_version = '2';
    service cloud.firestore {
      match /databases/{database}/documents {
        match /kelimeler/{document} {
          allow read: if true;
          allow write: if request.auth != null && request.auth.token.email == "admin@example.com";
        }
        match /istatistikler/{document} {
          allow read: if true;
          allow write: if request.auth != null;
        }
        match /kunduz_tiklamalari/{userDate} {
          allow read: if true;
          allow write: if request.auth != null && resource.id == request.auth.uid + "_" + request.resource.data.date;
          allow create: if request.auth != null;
        }
      }
    }
    */
  </script>
</body>
</html>
